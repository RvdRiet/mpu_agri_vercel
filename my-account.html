<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <meta name="theme-color" content="#2d5a27">
  <title>My Account — Mpumalanga AgriSupport</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="nav.css">
  <link rel="stylesheet" href="track.css">
  <link rel="stylesheet" href="account.css">
</head>
<body>
  <div class="page-wrapper">

    <!-- ===== NAVIGATION ===== -->
    <nav class="site-nav" role="navigation" aria-label="Main navigation">
      <div class="site-nav__inner">
        <a href="index.html" class="site-nav__brand">
          <img src="images/mpumalanga.webp" alt="" class="site-nav__logo" aria-hidden="true" />
          <span class="site-nav__brand-text">
            <span class="site-nav__brand-name">Mpumalanga AgriSupport</span>
            <span class="site-nav__brand-sub">Decision Support System</span>
          </span>
        </a>
        <div class="site-nav__links">
          <div class="nav-item"><a href="index.html" class="nav-link">Home</a></div>
          <div class="nav-item">
            <button class="nav-link" type="button" aria-expanded="false">Programmes <span class="nav-link__arrow" aria-hidden="true">&#9660;</span></button>
            <div class="nav-dropdown" role="menu">
              <a href="crop.html" class="nav-dropdown__link" role="menuitem"><span class="nav-dropdown__icon">&#127806;</span><span class="nav-dropdown__text"><span class="nav-dropdown__label">Crop Management</span><span class="nav-dropdown__desc">Crop farming support &amp; grants</span></span></a>
              <a href="livestock.html" class="nav-dropdown__link" role="menuitem"><span class="nav-dropdown__icon">&#128004;</span><span class="nav-dropdown__text"><span class="nav-dropdown__label">Livestock Management</span><span class="nav-dropdown__desc">Livestock development &amp; grants</span></span></a>
              <a href="environmental.html" class="nav-dropdown__link" role="menuitem"><span class="nav-dropdown__icon">&#127795;</span><span class="nav-dropdown__text"><span class="nav-dropdown__label">Environmental Enrichment</span><span class="nav-dropdown__desc">Conservation &amp; sustainability</span></span></a>
            </div>
          </div>
          <div class="nav-item"><a href="weather.html" class="nav-link">Weather</a></div>
          <div class="nav-item"><a href="alerts.html" class="nav-link">Alerts</a></div>
          <div class="nav-item"><a href="guides.html" class="nav-link">Guides</a></div>
          <div class="nav-item"><a href="e-learning.html" class="nav-link">E-learning</a></div>
          <div class="nav-item"><a href="support.html" class="nav-link">Support</a></div>
          <div class="nav-item">
            <button class="nav-link" type="button" aria-expanded="false">Apply <span class="nav-link__arrow" aria-hidden="true">&#9660;</span></button>
            <div class="nav-dropdown" role="menu">
              <a href="Application/crop.html" class="nav-dropdown__link" role="menuitem"><span class="nav-dropdown__icon">&#128196;</span><span class="nav-dropdown__text"><span class="nav-dropdown__label">Crop Grant</span><span class="nav-dropdown__desc">Apply for crop development support</span></span></a>
              <a href="Application/index.html" class="nav-dropdown__link" role="menuitem"><span class="nav-dropdown__icon">&#128196;</span><span class="nav-dropdown__text"><span class="nav-dropdown__label">Livestock Grant</span><span class="nav-dropdown__desc">Masibuyele Esibayeni Programme</span></span></a>
              <a href="Application/environmental.html" class="nav-dropdown__link" role="menuitem"><span class="nav-dropdown__icon">&#128196;</span><span class="nav-dropdown__text"><span class="nav-dropdown__label">Environmental Grant</span><span class="nav-dropdown__desc">Conservation &amp; enrichment funding</span></span></a>
              <div class="nav-dropdown__divider"></div>
              <a href="track.html" class="nav-dropdown__link" role="menuitem"><span class="nav-dropdown__icon">&#128269;</span><span class="nav-dropdown__text"><span class="nav-dropdown__label">Track Application</span><span class="nav-dropdown__desc">Check your application status</span></span></a>
            </div>
          </div>
        </div>
        <div class="site-nav__actions">
          <a href="my-account.html" class="nav-link active">My Account</a>
          <a href="track.html" class="nav-cta">Track</a>
        </div>
        <button class="nav-toggle" id="navToggle" type="button" aria-label="Toggle menu" aria-expanded="false"><span class="nav-toggle__bar"></span></button>
      </div>
      <div class="site-nav__mobile" id="mobileNav">
        <div class="mobile-nav__section"><div class="mobile-nav__heading">Navigation</div><a href="index.html" class="mobile-nav__link"><span class="mobile-nav__icon">&#127968;</span> Home</a><a href="weather.html" class="mobile-nav__link"><span class="mobile-nav__icon">&#9925;</span> Weather</a><a href="alerts.html" class="mobile-nav__link"><span class="mobile-nav__icon">&#9888;</span> Alerts</a><a href="guides.html" class="mobile-nav__link"><span class="mobile-nav__icon">&#128214;</span> Guides</a><a href="e-learning.html" class="mobile-nav__link"><span class="mobile-nav__icon">&#128218;</span> E-learning</a><a href="support.html" class="mobile-nav__link"><span class="mobile-nav__icon">&#128222;</span> Support</a></div>
        <div class="mobile-nav__section"><div class="mobile-nav__heading">Account</div><a href="my-account.html" class="mobile-nav__link active"><span class="mobile-nav__icon">&#128100;</span> My Account</a><a href="track.html" class="mobile-nav__link"><span class="mobile-nav__icon">&#128269;</span> Track Application</a></div>
        <div class="mobile-nav__section"><div class="mobile-nav__heading">Programmes</div><a href="crop.html" class="mobile-nav__link"><span class="mobile-nav__icon">&#127806;</span> Crop Management</a><a href="livestock.html" class="mobile-nav__link"><span class="mobile-nav__icon">&#128004;</span> Livestock Management</a><a href="environmental.html" class="mobile-nav__link"><span class="mobile-nav__icon">&#127795;</span> Environmental Enrichment</a></div>
        <div class="mobile-nav__section"><div class="mobile-nav__heading">Applications</div><a href="Application/crop.html" class="mobile-nav__link"><span class="mobile-nav__icon">&#128196;</span> Crop Grant</a><a href="Application/index.html" class="mobile-nav__link"><span class="mobile-nav__icon">&#128196;</span> Livestock Grant</a><a href="Application/environmental.html" class="mobile-nav__link"><span class="mobile-nav__icon">&#128196;</span> Environmental Grant</a></div>
        <div class="mobile-nav__actions"><a href="#" class="btn btn--secondary btn--block" id="mobileLogout">Logout</a></div>
      </div>
      <div class="mobile-nav-overlay" id="mobileOverlay"></div>
    </nav>

    <!-- ===== PAGE HEADER ===== -->
    <section class="page-header">
      <div class="container">
        <nav class="breadcrumbs" aria-label="Breadcrumb">
          <a href="index.html">Home</a>
          <span class="breadcrumbs__sep" aria-hidden="true">/</span>
          <span class="breadcrumbs__current">My Account</span>
        </nav>
        <h1 class="page-header__title">My Account</h1>
        <p class="page-header__subtitle">Manage your personal details, farm profile, documents and view application history.</p>
      </div>
    </section>

    <!-- ===== MAIN CONTENT ===== -->
    <main class="account-page">
      <div class="container">
        <div class="track-user-bar" id="accountUserBar">
          <span class="track-user-info">Signed in as <strong id="accountUserName"></strong> <span id="accountUserId" class="account-id"></span></span>
          <button type="button" class="track-logout-btn" id="accountLogout">Logout</button>
        </div>

        <!-- 1. Personal Details -->
        <section class="account-section" id="section-personal">
          <h2 class="account-section__title">Personal Details</h2>
          <p class="account-section__desc">Your contact and address. SA ID is read-only for verification.</p>
          <form id="formPersonal" class="account-form">
            <div class="form-group">
              <label for="personalId">South African ID number</label>
              <input type="text" id="personalId" class="form-input" readonly placeholder="13 digits" />
            </div>
            <div class="form-group">
              <label for="personalName">Full name</label>
              <input type="text" id="personalName" class="form-input" name="fullName" placeholder="Full name" />
            </div>
            <div class="form-row">
              <div class="form-group">
                <label for="personalPhone">Contact number</label>
                <input type="tel" id="personalPhone" class="form-input" name="contactNumber" placeholder="e.g. 082 123 4567" />
              </div>
              <div class="form-group">
                <label for="personalEmail">Email</label>
                <input type="email" id="personalEmail" class="form-input" name="email" placeholder="email@example.com" />
              </div>
            </div>
            <div class="form-group">
              <label for="personalAddress">Physical address</label>
              <textarea id="personalAddress" class="form-textarea" name="physicalAddress" rows="3" placeholder="Street, town, province, postal code"></textarea>
            </div>
            <div class="form-actions">
              <button type="submit" class="btn btn--primary">Save personal details</button>
              <span class="account-saved" id="personalSaved"></span>
            </div>
          </form>
        </section>

        <!-- 2. Farm Profile -->
        <section class="account-section" id="section-farm">
          <h2 class="account-section__title">Farm Profile</h2>
          <p class="account-section__desc">Farm name, location, size and production details.</p>
          <form id="formFarm" class="account-form">
            <div class="form-group">
              <label for="farmName">Farm name / location</label>
              <input type="text" id="farmName" class="form-input" name="farmName" placeholder="Farm or plot name" />
            </div>
            <div class="form-row">
              <div class="form-group">
                <label for="farmDistrict">District</label>
                <input type="text" id="farmDistrict" class="form-input" name="district" placeholder="e.g. Ehlanzeni" />
              </div>
              <div class="form-group">
                <label for="farmCoordinates">Coordinates (optional)</label>
                <input type="text" id="farmCoordinates" class="form-input" name="coordinates" placeholder="e.g. -25.123, 30.456" />
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label for="farmSize">Size (ha)</label>
                <input type="text" id="farmSize" class="form-input" name="sizeHa" placeholder="e.g. 10" inputmode="decimal" />
              </div>
              <div class="form-group">
                <label for="farmSoil">Soil type</label>
                <select id="farmSoil" class="form-select" name="soilType">
                  <option value="">— Select —</option>
                  <option value="Sandy">Sandy</option>
                  <option value="Clay">Clay</option>
                  <option value="Loam">Loam</option>
                  <option value="Sandy loam">Sandy loam</option>
                  <option value="Clay loam">Clay loam</option>
                  <option value="Other">Other</option>
                </select>
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label for="farmCommodities">Main commodities (crops/livestock)</label>
                <input type="text" id="farmCommodities" class="form-input" name="mainCommodities" placeholder="e.g. Maize, cattle" />
              </div>
              <div class="form-group">
                <label for="farmIrrigation">Irrigation type</label>
                <select id="farmIrrigation" class="form-select" name="irrigationType">
                  <option value="">— Select —</option>
                  <option value="None">None (dryland)</option>
                  <option value="Drip">Drip</option>
                  <option value="Pivot">Pivot</option>
                  <option value="Flood">Flood</option>
                  <option value="Sprinkler">Sprinkler</option>
                  <option value="Other">Other</option>
                </select>
              </div>
            </div>
            <div class="form-group">
              <label for="farmYields">Previous yields (optional)</label>
              <textarea id="farmYields" class="form-textarea" name="previousYields" rows="2" placeholder="Brief note on past yields"></textarea>
            </div>
            <div class="form-actions">
              <button type="submit" class="btn btn--primary">Save farm profile</button>
              <span class="account-saved" id="farmSaved"></span>
            </div>
          </form>
        </section>

        <!-- 3. Documents -->
        <section class="account-section" id="section-documents">
          <h2 class="account-section__title">Documents</h2>
          <p class="account-section__desc">Uploaded files. You can view, download or replace them.</p>
          <ul class="account-docs" id="accountDocsList"></ul>
        </section>

        <!-- 4. Application History -->
        <section class="account-section" id="section-apps">
          <h2 class="account-section__title">Application History</h2>
          <p class="account-section__desc">Your past and current applications. Open the tracker for full status.</p>
          <div id="accountAppList" class="track-list"></div>
          <div id="accountAppEmpty" class="track-empty" hidden>
            <p>You have not submitted any applications yet.</p>
            <a href="Application/index.html" class="btn-start-application">Start Application</a>
          </div>
          <p class="account-section__link"><a href="track.html" class="track-link">View full tracker &rarr;</a></p>
        </section>
      </div>
    </main>

    <!-- ===== FOOTER ===== -->
    <footer class="site-footer">
      <div class="footer__top"><div class="container"><div class="footer__grid">
        <div><p class="footer__brand-name">Mpumalanga AgriSupport</p><p class="footer__brand-text">Agricultural Decision Support System for the Mpumalanga Department of Agriculture.</p></div>
        <div><h4 class="footer__heading">Programmes</h4><div class="footer__links"><a href="crop.html">Crop Management</a><a href="livestock.html">Livestock Management</a><a href="environmental.html">Environmental Enrichment</a></div></div>
        <div><h4 class="footer__heading">Resources</h4><div class="footer__links"><a href="weather.html">Weather Data</a><a href="alerts.html">Farming Alerts</a><a href="guides.html">Advisory Guides</a><a href="support.html">Support Contacts</a><a href="track.html">Track Application</a></div></div>
        <div><h4 class="footer__heading">Legal</h4><div class="footer__links"><a href="popia.html">POPIA Compliance</a><a href="terms.html">Terms of Service</a><a href="staff-login.html">Staff Portal</a></div></div>
      </div></div></div>
      <div class="footer__bottom"><div class="container"><div class="footer__bottom-inner"><span>&copy; 2025 Mpumalanga Department of Agriculture. All rights reserved.</span><div class="footer__bottom-links"><a href="popia.html">Privacy</a><a href="terms.html">Terms</a></div></div></div></div>
    </footer>

  </div>

  <!-- Hidden file inputs for document upload -->
  <input type="file" id="docInputId" accept="image/*,.pdf" style="display:none" />
  <input type="file" id="docInputProof" accept="image/*,.pdf" style="display:none" />
  <input type="file" id="docInputBank" accept="image/*,.pdf" style="display:none" />

  <script src="js/security.js"></script>
  <script src="js/auth.js"></script>
  <script src="js/account-profile.js"></script>
  <script src="js/applications.js"></script>
  <script src="js/nav.js"></script>
  <script src="js/account.js"></script>
</body>
</html>
